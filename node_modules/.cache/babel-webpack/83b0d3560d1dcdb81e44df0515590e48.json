{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/vanbr/Documents/angular-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { User } from '../models';\nimport { loginDetails } from '../services/auth.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/auth.service\";\nimport * as i2 from \"../services/post.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/material/card\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/input\";\nimport * as i9 from \"@angular/common\";\nimport * as i10 from \"@angular/material/menu\";\n\nfunction FeedComponent_div_12_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 18);\n    i0.ɵɵelementStart(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"more_vert\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r3 = i0.ɵɵreference(8);\n\n    i0.ɵɵproperty(\"matMenuTriggerFor\", _r3);\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    \"liked\": a0\n  };\n};\n\nfunction FeedComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 0);\n    i0.ɵɵelementStart(1, \"mat-card\", 1);\n    i0.ɵɵelementStart(2, \"div\", 3);\n    i0.ɵɵelementStart(3, \"p\", 4);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"p\");\n    i0.ɵɵtemplate(6, FeedComponent_div_12_button_6_Template, 3, 1, \"button\", 10);\n    i0.ɵɵelementStart(7, \"mat-menu\", null, 11);\n    i0.ɵɵelementStart(9, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function FeedComponent_div_12_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const post_r1 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.deletePost(post_r1.postID.toString());\n    });\n    i0.ɵɵtext(10, \"delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 13);\n    i0.ɵɵtext(12, \"edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(13, \"hr\");\n    i0.ɵɵelementStart(14, \"p\", 14);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"hr\");\n    i0.ɵɵelementStart(17, \"ul\", 15);\n    i0.ɵɵelementStart(18, \"li\");\n    i0.ɵɵelementStart(19, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function FeedComponent_div_12_Template_button_click_19_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const post_r1 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.toggleLike(post_r1.postID.toString());\n    });\n    i0.ɵɵelementStart(20, \"mat-icon\", 17);\n    i0.ɵɵtext(21, \"thumb_up\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const post_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\"\", post_r1.user.FirstName, \" \", post_r1.user.LastName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", post_r1.User.userID == ctx_r0.user.userID);\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(post_r1.text);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(5, _c0, ctx_r0.didILikeIt(post_r1.Likes)));\n  }\n}\n\nexport class FeedComponent {\n  constructor(authService, postService, formBuilder) {\n    this.authService = authService;\n    this.postService = postService;\n    this.formBuilder = formBuilder;\n    this.postingForm = this.formBuilder.group({\n      text: ''\n    });\n    this.posts = [];\n    this.login = new loginDetails();\n    this.user = new User();\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    this.authService.getLogDetails().subscribe( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (result) {\n        _this.login = Object.assign({}, result);\n\n        if (result.isLogged) {\n          _this.authService.fetchMyUser().subscribe(user => {\n            _this.user = user;\n          });\n        }\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n    this.getPosts();\n  }\n\n  submitPost() {\n    if (this.postingForm.value.text != '') {\n      this.postService.createPost(this.postingForm.value.text, this.user).subscribe(result => {\n        this.getPosts();\n        this.postingForm.reset();\n      });\n    }\n  }\n\n  deletePost(_id) {\n    this.postService.deletePost(_id).subscribe(() => this.getPosts());\n  }\n\n  getPosts() {\n    this.postService.getPosts().subscribe(result => {\n      this.posts = [...result];\n    });\n  }\n\n  toggleLike(_id) {\n    this.postService.likePost(_id).subscribe(() => this.getPosts());\n  }\n\n  didILikeIt(likes) {\n    return likes.find(user => user.userID = this.user.userID) ? true : false;\n  }\n\n}\n\nFeedComponent.ɵfac = function FeedComponent_Factory(t) {\n  return new (t || FeedComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.PostService), i0.ɵɵdirectiveInject(i3.FormBuilder));\n};\n\nFeedComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FeedComponent,\n  selectors: [[\"app-feed\"]],\n  decls: 13,\n  vars: 2,\n  consts: [[1, \"card\"], [1, \"post\"], [3, \"formGroup\", \"ngSubmit\"], [\"id\", \"title-with-button\"], [1, \"title\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"type\", \"submit\"], [\"aria-hidden\", \"false\", \"aria-label\", \"comment\"], [\"id\", \"text\", \"appearance\", \"outline\"], [\"matInput\", \"\", \"id\", \"email\", \"type\", \"text\", \"formControlName\", \"text\"], [\"class\", \"card\", 4, \"ngFor\", \"ngForOf\"], [\"mat-icon-button\", \"\", \"aria-label\", \"more menu\", 3, \"matMenuTriggerFor\", 4, \"ngIf\"], [\"menu\", \"matMenu\"], [\"mat-menu-item\", \"\", 3, \"click\"], [\"mat-menu-item\", \"\"], [1, \"text\"], [1, \"buttonlist\"], [\"mat-icon-button\", \"\", 3, \"click\"], [\"aria-hidden\", \"false\", \"aria-label\", \"like\", 3, \"ngClass\"], [\"mat-icon-button\", \"\", \"aria-label\", \"more menu\", 3, \"matMenuTriggerFor\"]],\n  template: function FeedComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"mat-card\", 1);\n      i0.ɵɵelementStart(2, \"form\", 2);\n      i0.ɵɵlistener(\"ngSubmit\", function FeedComponent_Template_form_ngSubmit_2_listener() {\n        return ctx.submitPost();\n      });\n      i0.ɵɵelementStart(3, \"div\", 3);\n      i0.ɵɵelementStart(4, \"p\", 4);\n      i0.ɵɵtext(5, \"Whats on your mind?\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"button\", 5);\n      i0.ɵɵelementStart(7, \"mat-icon\", 6);\n      i0.ɵɵtext(8, \"send\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(9, \"hr\");\n      i0.ɵɵelementStart(10, \"mat-form-field\", 7);\n      i0.ɵɵelement(11, \"textarea\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(12, FeedComponent_div_12_Template, 22, 7, \"div\", 9);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.postingForm);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngForOf\", ctx.posts);\n    }\n  },\n  directives: [i4.MatCard, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i5.MatButton, i6.MatIcon, i7.MatFormField, i8.MatInput, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlName, i9.NgForOf, i9.NgIf, i10.MatMenu, i10.MatMenuItem, i9.NgClass, i10.MatMenuTrigger],\n  styles: [\".post[_ngcontent-%COMP%] {\\n  margin: 10px auto 5px;\\n  width: 85%;\\n  max-width: 80vw;\\n}\\n\\n.title[_ngcontent-%COMP%] {\\n  font-weight: bold;\\n  margin-bottom: 0;\\n}\\n\\n.timestamp[_ngcontent-%COMP%] {\\n  font-size: 0.7em;\\n}\\n\\nhr[_ngcontent-%COMP%] {\\n  border: 0;\\n  height: 1px;\\n  background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(128, 128, 128, 0.25), rgba(0, 0, 0, 0));\\n}\\n\\n.buttonlist[_ngcontent-%COMP%] {\\n  padding-left: 0;\\n  display: flex;\\n  list-style-type: none;\\n  justify-content: space-evenly;\\n}\\n\\n.buttonlist[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\n  margin-left: 3px;\\n  color: var(--primary);\\n}\\n\\n.liked[_ngcontent-%COMP%] {\\n  color: green;\\n}\\n\\n#title-with-button[_ngcontent-%COMP%] {\\n  display: flex;\\n  margin: 0 auto;\\n  justify-content: space-between;\\n}\\n\\n#title-with-button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  margin-top: 10px;\\n}\\n\\n#postContent[_ngcontent-%COMP%] {\\n  max-height: 30vh;\\n  width: 100%;\\n}\\n\\n#postContent[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%] {\\n  transition: height 2s;\\n}\\n\\n@media only screen and (max-width: 1200px) {\\n  textarea[_ngcontent-%COMP%] {\\n    height: 100px;\\n  }\\n}\\n\\n@media only screen and (max-width: 600px) {\\n  textarea[_ngcontent-%COMP%] {\\n    height: 25px;\\n  }\\n\\n  textarea[_ngcontent-%COMP%]:focus {\\n    height: 200px;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZlZWQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFDSSxxQkFBQTtFQUNBLFVBQUE7RUFDQSxlQUFBO0FBQUo7O0FBRUE7RUFDSSxpQkFBQTtFQUNBLGdCQUFBO0FBQ0o7O0FBQ0E7RUFDSSxnQkFBQTtBQUVKOztBQUFBO0VBQ0ksU0FBQTtFQUNBLFdBQUE7RUFDQSwwR0FBQTtBQUdKOztBQURBO0VBQ0ksZUFBQTtFQUNBLGFBQUE7RUFDQSxxQkFBQTtFQUNBLDZCQUFBO0FBSUo7O0FBSEk7RUFDSSxnQkFBQTtFQUNBLHFCQUFBO0FBS1I7O0FBRkE7RUFDSSxZQUFBO0FBS0o7O0FBSEE7RUFDSSxhQUFBO0VBQ0EsY0FBQTtFQUNBLDhCQUFBO0FBTUo7O0FBTEk7RUFDSSxnQkFBQTtBQU9SOztBQUhBO0VBQ0ksZ0JBQUE7RUFDQSxXQUFBO0FBTUo7O0FBTEk7RUFDSSxxQkFBQTtBQU9SOztBQUpBO0VBQ0k7SUFDSSxhQUFBO0VBT047QUFDRjs7QUFMQTtFQUNJO0lBQ0ksWUFBQTtFQU9OOztFQUpFO0lBQ0ksYUFBQTtFQU9OO0FBQ0YiLCJmaWxlIjoiZmVlZC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4ucG9zdCB7XHJcbiAgICBtYXJnaW46IDEwcHggYXV0byA1cHg7XHJcbiAgICB3aWR0aDogODUlO1xyXG4gICAgbWF4LXdpZHRoOiA4MHZ3O1xyXG59XHJcbi50aXRsZXtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMDtcclxufVxyXG4udGltZXN0YW1we1xyXG4gICAgZm9udC1zaXplOiAwLjdlbTtcclxufVxyXG5ociB7XHJcbiAgICBib3JkZXI6IDA7XHJcbiAgICBoZWlnaHQ6IDFweDtcclxuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgcmdiYSgwLCAwLCAwLCAwKSwgcmdiYShncmV5LCAwLjI1KSwgcmdiYSgwLCAwLCAwLCAwKSk7XHJcbn1cclxuLmJ1dHRvbmxpc3R7XHJcbiAgICBwYWRkaW5nLWxlZnQ6MDtcclxuICAgIGRpc3BsYXk6ZmxleDtcclxuICAgIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTtcclxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtZXZlbmx5O1xyXG4gICAgbGl7XHJcbiAgICAgICAgbWFyZ2luLWxlZnQ6M3B4O1xyXG4gICAgICAgIGNvbG9yOnZhcigtLXByaW1hcnkpO1xyXG4gICAgfVxyXG59XHJcbi5saWtlZHtcclxuICAgIGNvbG9yOmdyZWVuO1xyXG59XHJcbiN0aXRsZS13aXRoLWJ1dHRvbntcclxuICAgIGRpc3BsYXk6ZmxleDtcclxuICAgIG1hcmdpbjowIGF1dG87XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICBwe1xyXG4gICAgICAgIG1hcmdpbi10b3A6MTBweDtcclxuICAgIH1cclxuICAgIFxyXG59XHJcbiNwb3N0Q29udGVudHtcclxuICAgIG1heC1oZWlnaHQ6IDMwdmg7XHJcbiAgICB3aWR0aDoxMDAlO1xyXG4gICAgdGV4dGFyZWF7XHJcbiAgICAgICAgdHJhbnNpdGlvbjogaGVpZ2h0IDJzO1xyXG4gICAgfVxyXG59XHJcbkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogMTIwMHB4KSB7XHJcbiAgICB0ZXh0YXJlYXtcclxuICAgICAgICBoZWlnaHQ6MTAwcHg7XHJcbiAgICB9XHJcbn1cclxuQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA2MDBweCkge1xyXG4gICAgdGV4dGFyZWF7XHJcbiAgICAgICAgaGVpZ2h0OjI1cHg7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbiAgICB0ZXh0YXJlYTpmb2N1c3tcclxuICAgICAgICBoZWlnaHQ6MjAwcHg7XHJcbiAgICB9XHJcbn0iXX0= */\"]\n});","map":{"version":3,"sources":["C:\\Users\\vanbr\\Documents\\angular-frontend\\src\\app\\feed\\feed.component.ts","C:\\Users\\vanbr\\Documents\\angular-frontend\\src\\app\\feed\\feed.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { PostService } from '../services/post.service';\r\nimport { Post, User } from '../models';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { AuthService, loginDetails } from '../services/auth.service';\r\n@Component({\r\n  selector: 'app-feed',\r\n  templateUrl: './feed.component.html',\r\n  styleUrls: ['./feed.component.scss']\r\n})\r\nexport class FeedComponent implements OnInit {\r\n  postingForm = this.formBuilder.group({\r\n    text: '',\r\n  })\r\n  posts: Post[] = [];\r\n  constructor(private authService: AuthService, private postService: PostService, private formBuilder: FormBuilder,) { }\r\n  login: loginDetails = new loginDetails;\r\n  user: User = new User;\r\n  ngOnInit(): void {\r\n    this.authService.getLogDetails().subscribe(async result => {\r\n      this.login = { ...result }\r\n      if (result.isLogged) {\r\n        this.authService.fetchMyUser().subscribe((user)=>{\r\n          this.user = user;\r\n        });\r\n      }\r\n    })\r\n    this.getPosts();\r\n  }\r\n  submitPost() {\r\n    if (this.postingForm.value.text != '') {\r\n      this.postService.createPost(this.postingForm.value.text, this.user).subscribe(result => {\r\n        this.getPosts();\r\n        this.postingForm.reset();\r\n      });\r\n    }\r\n\r\n  }\r\n  deletePost(_id: string) {\r\n    this.postService.deletePost(_id).subscribe(() => this.getPosts());\r\n  }\r\n  getPosts() {\r\n    this.postService.getPosts().subscribe(result => {\r\n      this.posts = [...result];\r\n    });\r\n  }\r\n  toggleLike(_id: string) {\r\n    this.postService.likePost(_id).subscribe(() => this.getPosts());\r\n  }\r\n  didILikeIt(likes: User[]): boolean {\r\n    return likes.find(user => user.userID = this.user.userID) ? true : false;\r\n  }\r\n\r\n}\r\n","<div class=\"card\">\r\n    <mat-card class=\"post\">\r\n        <form [formGroup]=\"postingForm\" (ngSubmit)=\"submitPost()\">\r\n            <div id=\"title-with-button\">\r\n                <p class=\"title\">Whats on your mind?</p>\r\n                <button mat-raised-button color=\"primary\" type=\"submit\">\r\n                    <mat-icon aria-hidden=\"false\" aria-label=\"comment\">send</mat-icon>\r\n                </button>\r\n            </div>\r\n\r\n            <hr />\r\n            <mat-form-field id=\"text\" appearance=\"outline\">\r\n                <textarea matInput id=\"email\" type=\"text\" formControlName=\"text\"></textarea>\r\n            </mat-form-field>\r\n        </form>\r\n    </mat-card>\r\n</div>\r\n<div class=\"card\" *ngFor=\"let post of posts\">\r\n    <mat-card class=\"post\">\r\n        <div id=\"title-with-button\">\r\n            <p class=\"title\">{{post.user.FirstName}} {{post.user.LastName}}</p>\r\n            <p></p>\r\n            <button *ngIf=\"post.User.userID == user.userID\" mat-icon-button [matMenuTriggerFor]=\"menu\"\r\n                aria-label=\"more menu\">\r\n                <mat-icon>more_vert</mat-icon>\r\n            </button>\r\n            <mat-menu #menu=\"matMenu\">\r\n                <button (click)=\"deletePost(post.postID!.toString())\" mat-menu-item>delete</button>\r\n                <button mat-menu-item>edit</button>\r\n            </mat-menu>\r\n        </div>\r\n        <hr />\r\n        <p class=\"text\">{{post.text}}</p>\r\n        <hr />\r\n        <ul class=\"buttonlist\">\r\n            <li>\r\n                <button mat-icon-button (click)=\"toggleLike(post.postID!.toString())\">\r\n                    <mat-icon [ngClass]=\"{'liked': didILikeIt(post.Likes!)}\" aria-hidden=\"false\" aria-label=\"like\">thumb_up</mat-icon>\r\n                </button>\r\n\r\n            </li>\r\n        </ul>\r\n    </mat-card>\r\n</div>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}